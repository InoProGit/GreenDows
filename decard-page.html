<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Decard Autumn</title>
    <style>
    table{
        border-spacing: 0px;
        border-collapse: collapse;
    }
    td {
        padding: 5px;
        border: 1px solid black;
        text-align: center;
        cursor: pointer;
    }

    tr:nth-child(2n+1)  td:nth-child(2n+1), tr:nth-child(2n)  td:nth-child(2n) {
        background-color: #80808042;

    }
     
    .clicked {
        z-index: 2;
        outline: 3px solid red;
        background-color: cornflowerblue !important;
    }
    </style>
</head>
<body>
    <div class="task-desc">
        <article class="markdown-body entry-content container-lg" itemprop="text"><h1>Дроны</h1>
            <p>
                Мйарп склонился над монитором подключенным к древнему радару.
                Он ждал появления свидрушей с минуты на минуту. Дроны были наготове, единственная проблема была в том,
                что для поимки свидруша дрону нужны были X/Y координаты сектора относительно базы с координатами 0/0 в декартовой системе координат.
                Соответственно координаты квадрата, который располагался на карте  справа от базы были 1/0, снизу 0/-1 и т.д.
            </p>
            <p>
                Если бы обычный радар не вышел из строя, Мйарп бы так не переживал.
                Но древний радар использовал странную систему координат. Каждый квадрат обозначался уникальным числом. База находилась в квадрате 0.
                Центр карты на радаре выглядел так:
            </p>
            <div class="snippet-clipboard-content position-relative overflow-auto">
                <pre>
                    <code>
                        35  15  16  18  20
                        34  14  1   4   21
                        33  12  0   6   22
                        32  10  9   8   24
                        30  28  27  26  25
                    </code>
                </pre>
            </div>
            <p>
                Дело оставалось за малым - перевести координаты, выдаваемые древним радаром, в координаты понятные дрону.
                Компьютер понимал любой язык, но Мйарп выбрал свой любимый и набрал
                <code>define ancientToModern(n int) (x,y int)</code>. Свидрушы приближались...
            </p>
        </article>
    </div>
    
</article>
      </div>
    <form id="matrix-form" action="#">
        <label for="matrix-size">Ширина матрицы: <input name="matrix_size" type="number" step="2" min="5" value="5" max="20"></label>
        <br>
        <button type="submit">Создать что то</button>
    </form>

    <pre><code>
        35  15  16  18  20
        34  14  1   4   21
        33  12  0   6   22
        32  10  9   8   24
        30  28  27  26  25
        </code></pre>


    <table>
        <tbody id="matrix-graph">

        </tbody>
    </table>
<script>
let form = document.getElementById('matrix-form');

function spawnRadarVals (size = 5) {
    let radarVals = [];
    if ( size % 2 === 0 ) return 'Need not even number. Your number - ' + size;
    for (let i = 0; radarVals.length < size*size; i++) {
        // first exeptions
        if (i == 1 || i == 0) radarVals.push(i);
        // push composite nums
        for (let j = 2; j < i;) {
            if (i % j++ === 0) {
                radarVals.push(i);
                break;
            }
        }
    }
    return radarVals;
}

function radarToDecard ( radarVals = spawnRadarVals() ) {
    let x = 0,
        y = 0,
        comment = '',
        decard = {},
        step = 1,
        stepsCount = 0,
        ratationX = 0,
        ratationY = 1;
    radarVals.forEach(element => {
        if ( element === 0 ) {
            decard[element] = { // first element is Base
                x: 0,
                y: 0,
                comment: "Base"
            };
            return true;
        }
            if /*  */ ( ratationX === 0 && ratationY === 1 ) { // Up
                y++;
                if ( stepsCount === 0 && element !== radarVals[1] ) step++;
                stepsCount++;
                if ( step === stepsCount ) {
                    ratationX = 1;
                    ratationY = 0;
                    stepsCount = 0;
                }
            } else if ( ratationX === 1 && ratationY === 0 ) { // Right
                x++;
                stepsCount++;
                if ( step === stepsCount ) {
                    ratationX = 0;
                    ratationY = -1;
                    stepsCount = 0;
                }
            } else if ( ratationX === 0 && ratationY === -1 ) { // Down
                y--;
                if ( stepsCount === 0 ) step++;
                stepsCount++;
                if ( step === stepsCount ) {
                    ratationX = -1;
                    ratationY = 0;
                    stepsCount = 0;
                }
            } else if ( ratationX === -1 && ratationY === 0 ) { // Left
                x--;
                stepsCount++;
                if ( step === stepsCount ) {
                    ratationX = 0;
                    ratationY = 1;
                    stepsCount = 0;
                }
            }
            decard[element] = {
                x: x,
                y: y
            };
        
    });
    return decard;
}


console.log( radarToDecard( spawnRadarVals(11) ) );








</script>
</body>
</html>